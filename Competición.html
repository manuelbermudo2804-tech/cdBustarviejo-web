<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resultados y Clasificaciones - CD Bustarviejo</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f9;
    margin: 0;
    padding: 20px;
}

h1 {
    text-align: center;
    color: #0b3d91;
}

section {
    background: #ffffff;
    padding: 20px;
    margin-bottom: 30px;
    border-radius: 10px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.08);
}

h2 {
    border-bottom: 3px solid #0b3d91;
    padding-bottom: 6px;
    color: #0b3d91;
}

.partido {
    padding: 10px 0;
    border-bottom: 1px solid #e0e0e0;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

th, td {
    padding: 8px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

th {
    background-color: #0b3d91;
    color: white;
}

ul {
    padding-left: 20px;
}
</style>
</head>

<body>

<h1>CD Bustarviejo - Resultados Oficiales</h1>

<section id="proximos">
    <h2>Pr√≥ximos Partidos</h2>
    <p>Cargando datos...</p>
</section>

<section id="clasificacion">
    <h2>Clasificaci√≥n</h2>
</section>

<section id="goleadores">
    <h2>Goleadores</h2>
</section>

<script>
async function cargarDatos() {

    const url = "https://base44.app/api/apps/6992c6be619d2da592897991/functions/publicData";

    try {
        const response = await fetch(url);

        if (!response.ok) {
            throw new Error("Error al conectar con la API");
        }

        const data = await response.json();

        pintarPartidos(data.proximos_partidos);
        pintarClasificacion(data.clasificaciones);
        pintarGoleadores(data.goleadores);

    } catch (error) {
        document.getElementById("proximos").innerHTML =
            "<h2>Pr√≥ximos Partidos</h2><p>Error al cargar los datos.</p>";
        console.error(error);
    }
}

function pintarPartidos(lista) {

    const cont = document.getElementById("proximos");
    cont.innerHTML = "<h2>Pr√≥ximos Partidos</h2>";

    if (!lista || lista.length === 0) {
        cont.innerHTML += "<p>No hay partidos programados.</p>";
        return;
    }

    lista.forEach(p => {
        cont.innerHTML += `
            <div class="partido">
                üìÖ <strong>${p.fecha} ${p.hora}</strong><br>
                ‚öΩ ${p.local} vs ${p.visitante}<br>
                üìç ${p.campo || ""}
            </div>
        `;
    });
}

function pintarClasificacion(obj) {

    const cont = document.getElementById("clasificacion");

    if (!obj) return;

    for (let categoria in obj) {

        cont.innerHTML += `<h3>${categoria}</h3>`;

        cont.innerHTML += `
            <table>
                <tr>
                    <th>Pos</th>
                    <th>Equipo</th>
                    <th>Puntos</th>
                </tr>
        `;

        obj[categoria].forEach(e => {
            cont.innerHTML += `
                <tr>
                    <td>${e.posicion}</td>
                    <td>${e.equipo}</td>
                    <td>${e.puntos}</td>
                </tr>
            `;
        });

        cont.innerHTML += "</table>";
    }
}

function pintarGoleadores(obj) {

    const cont = document.getElementById("goleadores");

    if (!obj) return;

    for (let categoria in obj) {

        cont.innerHTML += `<h3>${categoria}</h3><ul>`;

        obj[categoria].forEach(j => {
            cont.innerHTML += `<li>${j.jugador} ‚Äî ${j.goles} goles</li>`;
        });

        cont.innerHTML += "</ul>";
    }
}

cargarDatos();
</script>

</body>
</html>
